---
title: 'Sync Your Claude Config Across Machines with GNU Stow'
date: '2026-02-17'
tags: ['claude', 'linux', 'dotfiles', 'gnu-stow', 'developer-tools']
draft: false
summary: Use GNU Stow and a dotfiles repo to keep your Claude Code config — MCP servers, skills, and local overrides — in sync across multiple Linux machines in under five minutes.
---

If you're a developer working across multiple Linux machines — a mini PC at home, a laptop on the road — keeping your Claude Code setup in sync is one of those small annoyances that adds up fast. Your MCP server registrations, skills, and `claude.local` tweaks live in `~/.claude`, and by default that directory goes nowhere.

This post walks through using GNU Stow to track `~/.claude` in a dotfiles repo and replicate it across machines in under five minutes.

## Why GNU Stow

Stow is a symlink farm manager. You give it a directory structure that mirrors your home directory, and it creates symlinks from `~` pointing into your dotfiles repo. The result: your config files live in git, but every tool that reads them still finds them at their expected paths.

It's the right amount of tool here. No templates, no variables, no config language to learn. Both machines run Linux with the same path (`~/.claude`), so there's nothing to abstract. Stow is essentially a one-liner once you've migrated the files.

## What's in ~/.claude

Before blindly committing everything, it's worth knowing what lives there:

```
~/.claude/
├── claude.local          # local overrides, custom instructions
├── settings.json         # preferences
├── mcp/                  # MCP server definitions
│   └── claude_desktop_config.json
├── skills/               # any custom skill definitions
├── auth.json             # ⚠️  session token — never commit this
└── cache/                # ⚠️  ephemeral — skip this too
```

The MCP config and skills are the real prizes. The auth and cache dirs are machine-local noise.

## Setup: First Machine

### 1. Install Stow

```bash
sudo apt install stow
```

### 2. Create your dotfiles repo

```bash
mkdir -p ~/dotfiles
git init ~/dotfiles
```

### 3. Move ~/.claude into the repo

Stow expects a package directory that mirrors the target (your home dir). So the Claude package lives at `~/dotfiles/claude/.claude/`:

```bash
mkdir -p ~/dotfiles/claude
mv ~/.claude ~/dotfiles/claude/.claude
```

### 4. Apply stow

```bash
stow --dir=~/dotfiles --target="$HOME" claude
```

That's it. Stow creates `~/.claude → ~/dotfiles/claude/.claude`. Claude Code sees nothing different; git now tracks everything.

### 5. Add a .gitignore

Before committing, protect secrets:

```
# ~/dotfiles/.gitignore
claude/.claude/auth.json
claude/.claude/.credentials
claude/.claude/session*
claude/.claude/cache/
```

### 6. Commit and push

```bash
cd ~/dotfiles
git add -p   # review what you're committing
git commit -m "feat: add claude config"
git remote add origin git@github.com:you/dotfiles.git
git push
```

## Setup: Second Machine

```bash
# Clone your dotfiles
git clone git@github.com:you/dotfiles.git ~/dotfiles

# Back up any existing ~/.claude if present
[[ -d ~/.claude ]] && mv ~/.claude ~/.claude.bak

# Apply stow
stow --dir=~/dotfiles --target="$HOME" claude
```

Done. Both machines now point at identical config.

## Day-to-Day Workflow

When you add a new MCP server or tweak `claude.local` on one machine:

```bash
cd ~/dotfiles
git add -p
git commit -m "chore: add nostr-intel-mcp server"
git push
```

On the other machine:

```bash
cd ~/dotfiles
git pull
```

No extra steps. The symlinks already point at the updated files.

## Automation

If you want to skip the manual steps, the companion script `setup-claude-dotfiles.sh` handles the full flow:

```bash
# First machine — migrate and apply
./setup-claude-dotfiles.sh

# Second machine — clone first, then restow
./setup-claude-dotfiles.sh --restow
```

It also accepts `--dotfiles-dir` if you keep your dotfiles somewhere other than `~/dotfiles`.

## Caveats

**Don't commit auth.json.** Seriously. It's a session token. The `.gitignore` above covers it, but double-check with `git status` before your first push.

**Stow conflict detection.** If `~/.claude` already exists as a real directory when you run `stow --restow`, stow will refuse to overwrite it. The script handles this by backing it up first, but if you're doing it manually, move or delete `~/.claude` before applying stow on the second machine.

**MCP paths.** If any of your MCP server definitions reference absolute paths (e.g. pointing at a local project), those will break on the other machine. Either use `~`-relative paths in your MCP config, or use environment variables that you define per-machine in your shell profile.

## That's It

GNU Stow plus a git repo is about as simple as this problem gets. No sync daemons, no third-party services, no config languages — just symlinks and version control doing what they've always done.
